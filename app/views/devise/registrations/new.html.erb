<div class="max-w-xs sm:max-w-xl md:max-w-2xl lg:max-w-3xl mx-auto px-4 sm:px-6 md:px-8 py-8 sm:py-12 md:py-16">
  <div class="bg-white rounded-lg shadow-md p-6 sm:p-8 md:p-10">
    <h1 class="text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900 mb-6 sm:mb-8">
      Register for Membership
    </h1>

    <div class="prose prose-sm sm:prose max-w-none mb-8">
      <p class="text-gray-600 mb-4">
        To become a member of Ruby Australia we ask for both <strong>authentication details</strong> (to ensure only you can update your details later), and <strong>membership details</strong> (as required by law).
      </p>

      <p class="text-gray-600">
        While membership details <%= link_to "can be accessed by other members", policy_path("register-access"), class: "text-ruby-red hover:text-red-700 transition-colors" %>, this is only for purposes related directly to the association. Your details <em>will not</em> be shared with anyone else, and will not be used for spam, undesired marketing, etc.
      </p>
    </div>

    <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { class: "space-y-8" }) do |f| %>
      <%= render "devise/shared/error_messages", resource: resource %>

      <!-- Authentication Details Section -->
      <div class="bg-gray-50 rounded-lg border border-gray-200 p-4 sm:p-6 md:p-8">
        <h2 class="text-lg sm:text-xl font-semibold text-gray-800 mb-4 sm:mb-6 pb-2 border-b border-gray-200">
          Authentication Details
        </h2>

        <div class="space-y-6">
          <div class="grid grid-cols-1 sm:grid-cols-4 gap-4 sm:gap-6 items-start">
            <%= f.label :email, class: "block text-sm font-medium text-gray-700 sm:text-right sm:mt-2" %>
            <div class="sm:col-span-3">
              <%= f.email_field :email, autofocus: true, autocomplete: "email",
                                class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-ruby-red focus:border-ruby-red" %>
            </div>
          </div>

          <div class="grid grid-cols-1 sm:grid-cols-4 gap-4 sm:gap-6 items-start">
            <%= f.label :password, class: "block text-sm font-medium text-gray-700 sm:text-right sm:mt-2" %>
            <div class="sm:col-span-3">
              <%= f.password_field :password, autocomplete: "new-password",
                                   class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-ruby-red focus:border-ruby-red" %>
              <% if @minimum_password_length %>
                <p class="mt-1 text-xs sm:text-sm text-gray-500">
                  <%= @minimum_password_length %> characters minimum
                </p>
              <% end %>
            </div>
          </div>

          <div class="grid grid-cols-1 sm:grid-cols-4 gap-4 sm:gap-6 items-start">
            <%= f.label :password_confirmation, class: "block text-sm font-medium text-gray-700 sm:text-right sm:mt-2" %>
            <div class="sm:col-span-3">
              <%= f.password_field :password_confirmation, autocomplete: "new-password",
                                   class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-ruby-red focus:border-ruby-red" %>
            </div>
          </div>
        </div>
      </div>

      <!-- Membership Details Section -->
      <div class="bg-gray-50 rounded-lg border border-gray-200 p-4 sm:p-6 md:p-8">
        <h2 class="text-lg sm:text-xl font-semibold text-gray-800 mb-4 sm:mb-6 pb-2 border-b border-gray-200">
          Membership Details
        </h2>

        <div class="prose prose-sm sm:prose max-w-none mb-6">
          <p class="text-gray-600">
            We have a <%= link_to "legal requirement", "https://www.consumer.vic.gov.au/clubs-and-fundraising/incorporated-associations/running-an-incorporated-association/membership", class: "text-ruby-red hover:text-red-700 transition-colors" %> to have all members' names and addresses on file. Other members can request to review them, but <%= link_to "we have a strict process", policy_path("register-access"), class: "text-ruby-red hover:text-red-700 transition-colors" %> around this to avoid abuse.
          </p>
        </div>

        <div class="space-y-6">
          <div class="grid grid-cols-1 sm:grid-cols-4 gap-4 sm:gap-6 items-start">
            <%= f.label :full_name, class: "block text-sm font-medium text-gray-700 sm:text-right sm:mt-2 after:content-['*'] after:ml-0.5 after:text-red-500" %>
            <div class="sm:col-span-3">
              <%= f.text_field :full_name,
                               class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-ruby-red focus:border-ruby-red" %>
            </div>
          </div>

          <div class="grid grid-cols-1 sm:grid-cols-4 gap-4 sm:gap-6 items-start">
            <%= f.label :address, class: "block text-sm font-medium text-gray-700 sm:text-right sm:mt-2 after:content-['*'] after:ml-0.5 after:text-red-500" %>
            <div class="sm:col-span-3">
              <%= f.text_area :address, rows: 3,
                              class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-ruby-red focus:border-ruby-red" %>
            </div>
          </div>

          <div class="sm:ml-[calc(100%/4)] grid grid-cols-1 gap-1">
            <div class="flex items-start">
              <div class="flex items-center h-5">
                <%= f.check_box :visible,
                                class: "h-4 w-4 text-ruby-red focus:ring-ruby-red border-gray-300 rounded" %>
              </div>
              <div class="ml-3 text-sm">
                <%= f.label :visible, 'Visible on Members Registry', class: "font-medium text-gray-700" %>
                <p class="text-gray-500">
                  The registry is only viewable to other members, and <em>only</em> with <%= link_to "supervision from a committee member", policy_path("register-access"), class: "text-ruby-red hover:text-red-700 transition-colors" %>. Still, you can retract your details if you wish.
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Mailing Lists Subsection -->
        <div class="mt-8 sm:mt-10 border-t border-gray-200 pt-6">
          <h3 class="text-base sm:text-lg font-medium text-gray-800 mb-4">
            Mailing Lists
          </h3>

          <p class="text-sm text-gray-500 mb-4">
            You can choose to subscribe to news about each of our major events. If you are already subscribed to any of these lists, those subscriptions will be honoured.
          </p>

          <div class="sm:ml-[calc(100%/4)] space-y-4">
            <% MailingList.each do |list| %>
              <div class="flex items-start">
                <div class="flex items-center h-5">
                  <%= hidden_field_tag "user[mailing_lists][#{list.name}]", "false" %>
                  <%= check_box_tag "user[mailing_lists][#{list.name}]", "true", @user.mailing_lists[list.name] == "true",
                                    id: list.normalised_name,
                                    class: "h-4 w-4 text-ruby-red focus:ring-ruby-red border-gray-300 rounded" %>
                </div>
                <div class="ml-3 text-sm">
                  <%= label_tag list.normalised_name, list.name, class: "font-medium text-gray-700" %>
                </div>
              </div>
            <% end %>
          </div>
        </div>
      </div>

      <!-- Human Verification Section -->
      <div class="bg-gray-50 rounded-lg border border-gray-200 p-4 sm:p-6 md:p-8">
        <h2 class="text-lg sm:text-xl font-semibold text-gray-800 mb-4 sm:mb-6 pb-2 border-b border-gray-200">
          One last thingâ€¦
        </h2>

        <p class="text-sm text-gray-500 mb-4">
          Please enter the text 'Ruby' in the text field below. This is just to avoid spambots signing up. ðŸ˜…
        </p>

        <div class="grid grid-cols-1 sm:grid-cols-4 gap-4 sm:gap-6 items-start">
          <%= label_tag :human_verification, "Ruby?", class: "block text-sm font-medium text-gray-700 sm:text-right sm:mt-2 after:content-['*'] after:ml-0.5 after:text-red-500" %>
          <div class="sm:col-span-3">
            <%= text_field_tag :human_verification, nil,
                               class: "w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-ruby-red focus:border-ruby-red" %>
          </div>
        </div>
      </div>

      <div class="text-sm text-gray-500 mt-4 text-center sm:text-left">
        By signing up, you agree to the <%= link_to "Ruby Australia Terms and Conditions", "/terms-and-conditions", class: "text-ruby-red hover:text-red-700 transition-colors" %>.
      </div>

      <div class="flex flex-col sm:flex-row gap-4 justify-center sm:justify-start">
        <%= f.submit "Register",
                     class: "inline-flex justify-center py-2 px-4 sm:py-3 sm:px-6 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-ruby-red hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-ruby-red transition-colors" %>
      </div>
    <% end %>

    <div class="mt-6 sm:mt-8 border-t border-gray-200 pt-6 flex flex-col sm:flex-row items-center justify-between">
      <div class="text-sm">
        <%= render "devise/shared/links" %>
      </div>
    </div>
  </div>
</div>
